<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Configuring Hortonworks Sandbox on Azure | Crash Course on Apache Spark</title>

    <!-- Styles and fonts -->
    <link href="themes/glide/stylesheets/glide.css" rel="stylesheet" type="text/css" />
    <link href="themes/glide/stylesheets/syntax.css" rel="stylesheet" type="text/css" />
    <link href='//fonts.googleapis.com/css?family=Bree+Serif&subset=latin,latin-ext' rel='stylesheet' type='text/css'>

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <script src="themes/glide/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="x001-configuring-hortonwork-sandbox-azure glide">
    <div class="page-wrapper">

      <!--[if lt IE 7]>
          <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
      <![endif]-->

      <header class="page-header" role="banner">
<a class="invisilink" href="./">            <span class="book-title">Crash Course on Apache Spark</span>
</a>        <span class="book-author visuallyhidden">by <a href="http://linkedin.com/in/saptak">Saptak Sen</a></span>
      </header>

        <div class="content-wrapper clearfix">

          <section class="main-content" role="main">
            <div class="main-content-source">
              <h1>Configuring Hortonworks Sandbox on Azure</h1>

<p>For folks attending the workshop at Hadoop Summit, San Jose 2015 we provided Microsoft Azure Pass. If you already have an Azure account skip this step. If you are following along at home you can sign-up for an <a href="http://azure.microsoft.com/en-us/pricing/free-trial/">Azure Trial</a> or <a href="http://hortonworks.com/sandbox">download the Hortonworks Sandbox</a> on your machine.</p>

<p>To use the Microsoft Azure Pass navigate to <a href="http://www.microsoftazurepass.com">http://www.microsoftazurepass.com</a></p>

<p><img src="https://www.dropbox.com/s/o5x4rbcgbybmqfo/Screenshot%202015-06-04%2019.42.35.png?dl=1" /></p>

<p>On  the next step, you will need to provide a Live Id that is not already tied up with an existing Azure account.</p>

<p><img src="https://www.dropbox.com/s/rcwmsioszdms1c6/Screenshot%202015-06-04%2019.42.46.png?dl=1" /></p>

<p>You will receive $100 credit, which in my estimate is worth Hortonworks Sandbox node running on a A3 size VM for about 12 days. Your mileage may vary:</p>

<p><img src="https://www.dropbox.com/s/vkl3mgn2prukcmt/Screenshot%202015-06-04%2019.43.15.png?dl=1" /></p>

<p>Complete the signup:</p>

<p><img src="https://www.dropbox.com/s/iruyqizq1q4b9qd/Screenshot%202015-06-04%2019.45.41.png?dl=1" /></p>

<p>Wait, your Azure account will be ready in a few minutes</p>

<p><img src="https://www.dropbox.com/s/hpunlstu4b1yvjw/Screenshot%202015-06-04%2019.47.16.png?dl=1" /></p>

<p>Start by logging into the Azure Portal with your Azure account:<a href="https://portal.azure.com/">https://portal.azure.com/</a></p>

<p><img src="http://hortonassets.s3.amazonaws.com/tutorial/azure-sandbox/01.png" />  </p>

<p>Navigate to the <code>MarketPlace</code> </p>

<p><img src="http://hortonassets.s3.amazonaws.com/tutorial/azure-sandbox/04.jpeg" />  </p>

<p>Search for Hortonworks. Click on the Hortonworks Sandbox icon.</p>

<p><img src="http://hortonassets.s3.amazonaws.com/tutorial/azure-sandbox/08.png" />  </p>

<p>To go directly to the Hortonworks Sandbox on Azure page navigate to <a href="http://azure.microsoft.com/en-us/marketplace/partners/hortonworks/hortonworks-sandbox-sandbox22/">http://azure.microsoft.com/en-us/marketplace/partners/hortonworks/hortonworks-sandbox-sandbox22/</a></p>

<p>This will launch the wizard to configure Hortonworks Sandbox for deployment.</p>

<p><img src="http://hortonassets.s3.amazonaws.com/tutorial/azure-sandbox/10.png" />  </p>

<p>Note the highlighted text in the instructions above. You will need to note down the <code>hostname</code> and the <code>username</code>/<code>password</code> that you enter in the next steps to be able to access the Hortonworks Sandbox once deployed.</p>

<p><img src="https://www.dropbox.com/s/0umj26zoaa68h86/Screenshot%202015-06-04%2019.53.55.png?dl=1" />  </p>

<p>I recommend you select <code>Standard A4</code> for the pricing tier, so that you get more memory to play with. You can change other configurations if you want, but the defaults work well. I usually change the location to the datacenter to where my preexisting Azure resources are or the one closest to me.</p>

<p><img src="http://hortonassets.s3.amazonaws.com/tutorial/azure-sandbox/14.png" />  </p>

<p>Click <code>Buy</code> if you agree with everything on this page.</p>

<p><img src="http://hortonassets.s3.amazonaws.com/tutorial/azure-sandbox/16.png" />  </p>

<p>At this point it should take you back to the Azure portal home page where you can see the deployment in progress.</p>

<p><img src="https://www.dropbox.com/s/pjqok0bppc6i3hl/Screenshot%202015-06-04%2019.55.54.png?dl=1" />  </p>

<p>Once the deployment completes you will see this page with configuration and status of you VM. Again it is important to note down the DNS name of your VM which you will use in the next steps.</p>

<p><img src="https://www.dropbox.com/s/9z9jsjqdmklq6gi/Screenshot%202015-06-04%2020.00.03.png?dl=1" />  </p>

<p>If you scroll down you can see the Estimated spend and other metrics for your VM.</p>

<p><img src="http://hortonassets.s3.amazonaws.com/tutorial/azure-sandbox/22.png" />  </p>

<p>Azure sets the SSH port dynamically for security reasons. Let&rsquo;s look up the SSH port.</p>

<p>To look up the SSH port click on the <code>Settings</code> icon on the top panel</p>

<p><img src="https://www.dropbox.com/s/wr8e07l3vssyb49/Screenshot%202015-06-04%2020.01.49.png?dl=1" /></p>

<p>Click on <code>Endpoints</code> and scroll down to note the public SSH port for your VM</p>

<p><img src="https://www.dropbox.com/s/cfwk3qykqjx2ihr/Screenshot%202015-06-04%2020.02.25.png?dl=1" /></p>

<p>Now we can use the command below to login.</p>
<pre class="highlight shell">ssh &lt;username&gt;@&lt;hostname&gt;.cloudapp.net -p &lt;port&gt;;
</pre>

<p>Replace <code>&lt;username&gt;</code>, <code>&lt;hostname&gt;</code> and <code>&lt;port&gt;</code> as you have noted down during your deployment. The password is the same password that you have provided during deployment.</p>

<p><img src="https://www.dropbox.com/s/w49sxetruslq065/Screenshot%202015-06-04%2020.14.20.png?dl=1" /></p>

<p>Once you login, let&rsquo;s change the <code>root</code> password to a known password using the command</p>
<pre class="highlight shell">sudo passwd root
</pre>

<p><img src="https://www.dropbox.com/s/flioznhrl97ik35/Screenshot%202015-06-07%2015.43.44.png?dl=1" /></p>

<p>Now we can login as <code>root</code> with the command <code>su</code></p>

<p><img src="https://www.dropbox.com/s/e1euvrfwau5v9u4/Screenshot%202015-06-07%2015.48.04.png?dl=1" /></p>

<p>Next we are going to change the hostname of the VM to <code>sandbox.hortonworks.com</code> with the command</p>
<pre class="highlight plaintext">sudo hostname sandbox.hortonworks.com
</pre>

<p><img src="https://www.dropbox.com/s/p01exun3ww9v75e/Screenshot%202015-06-07%2020.21.21.png?dl=1" /></p>

<p>Let’s navigate to the home page of your Sandbox by pointing your browser to the URL: <code>http://&lt;hostname&gt;.cloudapp.net:8888</code> , where <code>&lt;hostname&gt;</code> is the hostname you entered during configuration.</p>

<p>If you are doing it for the first time, it will take you to the registration page.</p>

<p><img src="http://hortonassets.s3.amazonaws.com/tutorial/azure-sandbox/24.png" />  </p>

<p>Once you register, you will see the homepage of your Sandbox.</p>

<p><img src="http://hortonassets.s3.amazonaws.com/tutorial/azure-sandbox/26.png" />  </p>

<p>Now navigate to port 8000 of your Hortonworks Sandbox on Azure from the browser.</p>

<p><img src="http://hortonassets.s3.amazonaws.com/tutorial/azure-sandbox/28.png" />  </p>

<p>Enable Ambari by clicking on the <code>Enable</code> button. Ambari is crucial for managing your HDP instance.</p>

<p><img src="http://hortonassets.s3.amazonaws.com/tutorial/azure-sandbox/30.png" /></p>

<p>If you want a full list of tutorial that you can use with your newly minted Hortonworks Sandbox on Azure go to <a href="http://hortonworks.com/tutorials">http://hortonworks.com/tutorials</a>.</p>

            </div>
            <nav class="main-content-nav clearfix" role="navigation">
              <ul>
                <li><a class="previous" href="./">Previous</a></li>
                <li><a class="next" href="004-installing-apache-spark-1-3-1.html">Next</a></li>
              </ul>
            </nav>
          </section>

          <aside class="aside-content" role="complementary">
            <div class="aside-wrapper">

              <div class="block table-of-contents">
                <h3>Table of Contents</h3>
                <nav role="navigation">
                  <ul>
                    <li class='child '><a href="./">Introduction</a></li><li class='child active'><a href="001-configuring-hortonwork-sandbox-azure.html">Configuring Hortonworks Sandbox on Azure</a></li><li class='child '><a href="004-installing-apache-spark-1-3-1.html">Installing Apache Spark 1.3.1 on HDP 2.2.4.2</a></li><li class='child '><a href="007-Installing-Spark-1-2.html">Installing Apache Spark 1.2.0 on HDP 2.2</a></li><li class='child '><a href="010-basics-of-programming-apache-spark.html">Basics of programming Apache Spark</a></li><li class='child '><a href="013-scala-primer.html">A short primer on Scala</a></li><li class='child '><a href="016-spark-with-scala.html">Exploring Spark with Scala</a></li><li class='child '><a href="019-hive-orc-spark.html">Using Hive and ORC with Apache Spark</a></li><li class='child '><a href="022-installing-zeppelin.html">Installing and configuring Zeppelin</a></li><li class='child '><a href="025-ipython-notebook-with-apache-spark.html">Using IPython Notebook with Apache Spark</a></li><li class='child '><a href="028-spark-with-hdp.html">A Lap around Apache Spark 1.3.1 with HDP 2.3</a></li>
                  </ul>
                </nav>
              </div>
              <!--
              <div class="block translations">
                <h3>Book translations</h3>
                <p>This book is translated into 
                  <a href="#">Spanish</a>
                  and <a href="#">English</a>.
                  You can help with more translations <a href="https://github.com/saptak/spark">on Github</a>.
                </p>
              </div>
              -->
            </div><!-- end aside-wrapper -->
          </aside>

        </div><!-- end content-wrapper -->

      <footer class="page-footer">

        <div class="footer-wrapper">
          <!--
          <div class="block downloads">&nbsp;
            <h3>Downloads</h3>
            <p>Download this book in
                <a href="#">PDF</a>, <a href="#">mobi</a>, and <a href="#">epub</a>
              form for free.
            </p>
          </div>
          -->
          <div class="block license">
            <h3>License</h3>
            <p>This book is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0">Attribution-ShareAlike</a> license.</p>
          </div>

          <div class="block open-source">
            <h3>This book is open source</h3>
            <p>The source of this book is <a href="https://github.com/saptak/spark">hosted on Github</a>. Go, ahead. Check it out.</p>
          </div>

          <small class="small-text">Made with <a href="http://bitbooks.cc">Bitbooks</a></small>

        </div><!-- end footer-wrapper -->

      </footer>


    </div><!-- end page-wrapper -->

    <!-- include scripts just before the close of the body tag -->
    <script src="themes/glide/javascripts/anchor.min.js" type="text/javascript"></script>
    <script src="themes/glide/javascripts/glide.js" type="text/javascript"></script>
  </body>
</html>